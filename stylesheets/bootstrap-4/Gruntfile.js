/*!
 * Bootstrap's Gruntfile
 * http://getbootstrap.com
 * Copyright 2013-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
module.exports=function(s){"use strict";s.util.linefeed="\n",RegExp.quote=function(s){return s.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};var e=require("fs"),t=require("path"),r=(require("glob"),require("is-travis")),o=require("npm-shrinkwrap"),c=require("mq4-hover-shim"),i=require("autoprefixer")({browsers:["Chrome >= 35","Firefox >= 31","Edge >= 12","Explorer >= 9","iOS >= 8","Safari >= 8","Android 2.3","Android >= 4","Opera >= 12"]}),n=require("./grunt/bs-commonjs-generator.js"),a=s.file.readJSON("./grunt/configBridge.json",{encoding:"utf8"});Object.keys(a.paths).forEach(function(s){a.paths[s].forEach(function(s,e,r){r[e]=t.join("./docs/assets",s)})}),s.initConfig({pkg:s.file.readJSON("package.json"),banner:'/*!\n * Bootstrap v<%= pkg.version %> (<%= pkg.homepage %>)\n * Copyright 2011-<%= grunt.template.today("yyyy") %> <%= pkg.author %>\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n',jqueryCheck:"if (typeof jQuery === 'undefined') {\n  throw new Error('Bootstrap\\'s JavaScript requires jQuery')\n}\n",jqueryVersionCheck:"+function ($) {\n  var version = $.fn.jquery.split(' ')[0].split('.')\n  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1) || (version[0] >= 3)) {\n    throw new Error('Bootstrap\\'s JavaScript requires at least jQuery v1.9.1 but less than v3.0.0')\n  }\n}(jQuery);\n\n",clean:{dist:"dist",docs:"docs/dist"},lineremover:{es6Import:{files:{"<%= concat.bootstrap.dest %>":"<%= concat.bootstrap.dest %>"},options:{exclusionPattern:/^(import|export)/g}}},babel:{dev:{options:{sourceMap:!0,modules:"ignore"},files:{"js/dist/util.js":"js/src/util.js","js/dist/alert.js":"js/src/alert.js","js/dist/button.js":"js/src/button.js","js/dist/carousel.js":"js/src/carousel.js","js/dist/collapse.js":"js/src/collapse.js","js/dist/dropdown.js":"js/src/dropdown.js","js/dist/modal.js":"js/src/modal.js","js/dist/scrollspy.js":"js/src/scrollspy.js","js/dist/tab.js":"js/src/tab.js","js/dist/tooltip.js":"js/src/tooltip.js","js/dist/popover.js":"js/src/popover.js"}},dist:{options:{modules:"ignore"},files:{"<%= concat.bootstrap.dest %>":"<%= concat.bootstrap.dest %>"}},umd:{options:{modules:"umd"},files:{"dist/js/umd/util.js":"js/src/util.js","dist/js/umd/alert.js":"js/src/alert.js","dist/js/umd/button.js":"js/src/button.js","dist/js/umd/carousel.js":"js/src/carousel.js","dist/js/umd/collapse.js":"js/src/collapse.js","dist/js/umd/dropdown.js":"js/src/dropdown.js","dist/js/umd/modal.js":"js/src/modal.js","dist/js/umd/scrollspy.js":"js/src/scrollspy.js","dist/js/umd/tab.js":"js/src/tab.js","dist/js/umd/tooltip.js":"js/src/tooltip.js","dist/js/umd/popover.js":"js/src/popover.js"}}},eslint:{options:{configFile:"js/.eslintrc"},target:"js/src/*.js"},jscs:{options:{config:"js/.jscsrc"},grunt:{src:["Gruntfile.js","grunt/*.js"]},core:{src:"js/src/*.js"},test:{src:"js/tests/unit/*.js"},assets:{options:{requireCamelCaseOrUpperCaseIdentifiers:null},src:["docs/assets/js/src/*.js","docs/assets/js/*.js","!docs/assets/js/*.min.js"]}},stamp:{options:{banner:"<%= banner %>\n<%= jqueryCheck %>\n<%= jqueryVersionCheck %>\n+function ($) {\n",footer:"\n}(jQuery);"},bootstrap:{files:{src:"<%= concat.bootstrap.dest %>"}}},concat:{options:{stripBanners:!1},bootstrap:{src:["js/src/util.js","js/src/alert.js","js/src/button.js","js/src/carousel.js","js/src/collapse.js","js/src/dropdown.js","js/src/modal.js","js/src/scrollspy.js","js/src/tab.js","js/src/tooltip.js","js/src/popover.js"],dest:"dist/js/<%= pkg.name %>.js"}},uglify:{options:{compress:{warnings:!1},mangle:!0,preserveComments:/^!|@preserve|@license|@cc_on/i},core:{src:"<%= concat.bootstrap.dest %>",dest:"dist/js/<%= pkg.name %>.min.js"},docsJs:{src:a.paths.docsJs,dest:"docs/assets/js/docs.min.js"}},qunit:{options:{inject:"js/tests/unit/phantom.js"},files:"js/tests/index.html"},scsslint:{options:{bundleExec:!0,config:"scss/.scss-lint.yml",reporterOutput:null},src:["scss/*.scss","!scss/_normalize.scss"]},postcss:{core:{options:{map:!0,processors:[c.postprocessorFor({hoverSelectorPrefix:".bs-true-hover "}),i]},src:"dist/css/*.css"},docs:{options:{processors:[i]},src:"docs/assets/css/docs.min.css"},examples:{options:{processors:[i]},expand:!0,cwd:"docs/examples/",src:["**/*.css"],dest:"docs/examples/"}},cssmin:{options:{compatibility:"ie9",keepSpecialComments:"*",sourceMap:!0,advanced:!1},core:{files:[{expand:!0,cwd:"dist/css",src:["*.css","!*.min.css"],dest:"dist/css",ext:".min.css"}]},docs:{src:"docs/assets/css/docs.min.css",dest:"docs/assets/css/docs.min.css"}},csscomb:{options:{config:"scss/.csscomb.json"},dist:{expand:!0,cwd:"dist/css/",src:["*.css","!*.min.css"],dest:"dist/css/"},examples:{expand:!0,cwd:"docs/examples/",src:"**/*.css",dest:"docs/examples/"},docs:{src:"docs/assets/css/src/docs.css",dest:"docs/assets/css/src/docs.css"}},copy:{docs:{expand:!0,cwd:"dist/",src:["**/*"],dest:"docs/dist/"}},connect:{server:{options:{port:3e3,base:"."}}},jekyll:{options:{bundleExec:!0,config:"_config.yml",incremental:!1},docs:{},github:{options:{raw:"github: true"}}},htmllint:{options:{ignore:["Element \u201cimg\u201d is missing required attribute \u201csrc\u201d.","Attribute \u201cautocomplete\u201d is only allowed when the input type is \u201ccolor\u201d, \u201cdate\u201d, \u201cdatetime\u201d, \u201cdatetime-local\u201d, \u201cemail\u201d, \u201cmonth\u201d, \u201cnumber\u201d, \u201cpassword\u201d, \u201crange\u201d, \u201csearch\u201d, \u201ctel\u201d, \u201ctext\u201d, \u201ctime\u201d, \u201curl\u201d, or \u201cweek\u201d.","Attribute \u201cautocomplete\u201d not allowed on element \u201cbutton\u201d at this point.","Element \u201cdiv\u201d not allowed as child of element \u201cprogress\u201d in this context. (Suppressing further errors from this subtree.)","Consider using the \u201ch1\u201d element as a top-level heading only (all \u201ch1\u201d elements are treated as top-level headings by many screen readers and other tools).","The \u201cdatetime\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill."]},src:["_gh_pages/**/*.html","js/tests/visual/*.html"]},watch:{src:{files:"<%= jscs.core.src %>",tasks:["babel:dev"]},sass:{files:"scss/**/*.scss",tasks:["dist-css","docs"]},docs:{files:"docs/assets/scss/**/*.scss",tasks:["dist-css","docs"]}},"saucelabs-qunit":{all:{options:{build:process.env.TRAVIS_JOB_ID,concurrency:10,maxRetries:3,maxPollRetries:4,urls:["http://127.0.0.1:3000/js/tests/index.html?hidepassed"],browsers:s.file.readYAML("grunt/sauce_browsers.yml")}}},exec:{npmUpdate:{command:"npm update"}},buildcontrol:{options:{dir:"_gh_pages",commit:!0,push:!0,message:"Built %sourceName% from commit %sourceCommit% on branch %sourceBranch%"},pages:{options:{remote:"git@github.com:twbs/derpstrap.git",branch:"gh-pages"}}},compress:{main:{options:{archive:"bootstrap-<%= pkg.version %>-dist.zip",mode:"zip",level:9,pretty:!0},files:[{expand:!0,cwd:"dist/",src:["**"],dest:"bootstrap-<%= pkg.version %>-dist"}]}}}),require("load-grunt-tasks")(s,{scope:"devDependencies",pattern:["grunt-*","!grunt-sass","!grunt-contrib-sass"]}),require("time-grunt")(s),s.registerTask("validate-html",["jekyll:docs","htmllint"]);var d=function(s){return!process.env.TWBS_TEST||process.env.TWBS_TEST===s},p=function(s){return void 0===s||"0"!==s},l=[];d("core")&&"twbs-savage/bootstrap"!==process.env.TRAVIS_REPO_SLUG&&(l=l.concat(["dist-css","dist-js","test-scss","test-js","docs"])),d("validate-html")&&r&&p(process.env.TWBS_DO_VALIDATOR)&&l.push("validate-html"),"undefined"!=typeof process.env.SAUCE_ACCESS_KEY&&d("sauce-js-unit")&&p(process.env.TWBS_DO_SAUCE)&&(l.push("babel:dev"),l.push("connect"),l.push("saucelabs-qunit")),s.registerTask("test",l),s.registerTask("test-js",["eslint","jscs:core","jscs:test","jscs:grunt","qunit"]),s.registerTask("dist-js",["babel:dev","concat","lineremover","babel:dist","stamp","uglify:core","commonjs"]),s.registerTask("test-scss",["scsslint"]),function(e){require("./grunt/bs-sass-compile/"+e+".js")(s)}(process.env.TWBS_SASS||"libsass"),s.registerTask("sass-compile",["sass:core","sass:docs"]),s.registerTask("dist-css",["sass-compile","postcss:core","csscomb:dist","cssmin:core","cssmin:docs"]),s.registerTask("dist",["clean:dist","dist-css","dist-js"]),s.registerTask("default",["clean:dist","test"]),s.registerTask("commonjs",["babel:umd","npm-js"]),s.registerTask("npm-js","Generate npm-js entrypoint module in dist dir.",function(){var e=Object.keys(s.config.get("babel.umd.files")).map(function(s){return"./"+t.join("umd",t.basename(s))}),r="dist/js/npm.js";n(s,e,r)}),s.registerTask("docs-css",["postcss:docs","postcss:examples","csscomb:docs","csscomb:examples","cssmin:docs"]),s.registerTask("docs-js",["uglify:docsJs"]),s.registerTask("lint-docs-js",["jscs:assets"]),s.registerTask("docs",["docs-css","docs-js","lint-docs-js","clean:docs","copy:docs"]),s.registerTask("docs-github",["jekyll:github","htmlmin"]),s.registerTask("prep-release",["dist","docs","docs-github","compress"]),s.registerTask("publish",["buildcontrol:pages"]),s.registerTask("update-shrinkwrap",["exec:npmUpdate","_update-shrinkwrap"]),s.registerTask("_update-shrinkwrap",function(){var t=this.async();o({dev:!0,dirname:__dirname},function(r){r&&s.fail.warn(r);var o="grunt/npm-shrinkwrap.json";e.renameSync("npm-shrinkwrap.json",o),s.log.writeln("File "+o.cyan+" updated."),t()})})};