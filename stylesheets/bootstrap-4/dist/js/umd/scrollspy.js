!function(t,e){if("function"==typeof define&&define.amd)define(["exports","module","./util"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module,require("./util"));else{var i={exports:{}};e(i.exports,i,t.Util),t.scrollspy=i.exports}}(this,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=s(i),l=function(t){var e="scrollspy",i="4.0.0-alpha",s="bs.scrollspy",l="."+s,a=".data-api",f=t.fn[e],c={offset:10,method:"auto",target:""},h={offset:"number",method:"string",target:"(string|element)"},u={ACTIVATE:"activate"+l,SCROLL:"scroll"+l,LOAD_DATA_API:"load"+l+a},_={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",NAV_LINK:"nav-link",NAV:"nav",ACTIVE:"active"},g={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",LIST_ITEM:".list-item",LI:"li",LI_DROPDOWN:"li.dropdown",NAV_LINKS:".nav-link",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},d={OFFSET:"offset",POSITION:"position"},v=function(){function a(e,i){r(this,a),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=this._config.target+" "+g.NAV_LINKS+","+(this._config.target+" "+g.DROPDOWN_ITEMS),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(u.SCROLL,t.proxy(this._process,this)),this.refresh(),this._process()}return o(a,[{key:"refresh",value:function(){var e=this,i=this._scrollElement!==this._scrollElement.window?d.POSITION:d.OFFSET,s="auto"===this._config.method?i:this._config.method,r=s===d.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var o=t.makeArray(t(this._selector));o.map(function(e){var i=void 0,o=n["default"].getSelectorFromElement(e);return o&&(i=t(o)[0]),i&&(i.offsetWidth||i.offsetHeight)?[t(i)[s]().top+r,o]:void 0}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})}},{key:"dispose",value:function(){t.removeData(this._element,s),t(this._scrollElement).off(l),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null}},{key:"_getConfig",value:function(i){if(i=t.extend({},c,i),"string"!=typeof i.target){var s=t(i.target).attr("id");s||(s=n["default"].getUID(e),t(i.target).attr("id",s)),i.target="#"+s}return n["default"].typeCheckConfig(e,i,h),i}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.scrollY:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_process",value:function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._scrollElement.offsetHeight;if(this._scrollHeight!==e&&this.refresh(),t>=i){var s=this._targets[this._targets.length-1];this._activeTarget!==s&&this._activate(s)}if(this._activeTarget&&t<this._offsets[0])return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;){var o=this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&(void 0===this._offsets[r+1]||t<this._offsets[r+1]);o&&this._activate(this._targets[r])}}},{key:"_activate",value:function(e){this._activeTarget=e,this._clear();var i=this._selector.split(",");i=i.map(function(t){return t+'[data-target="'+e+'"],'+(t+'[href="'+e+'"]')});var s=t(i.join(","));s.hasClass(_.DROPDOWN_ITEM)?(s.closest(g.DROPDOWN).find(g.DROPDOWN_TOGGLE).addClass(_.ACTIVE),s.addClass(_.ACTIVE)):s.parents(g.LI).find(g.NAV_LINKS).addClass(_.ACTIVE),t(this._scrollElement).trigger(u.ACTIVATE,{relatedTarget:e})}},{key:"_clear",value:function(){t(this._selector).filter(g.ACTIVE).removeClass(_.ACTIVE)}}],[{key:"_jQueryInterface",value:function(e){return this.each(function(){var i=t(this).data(s),r="object"==typeof e&&e||null;if(i||(i=new a(this,r),t(this).data(s,i)),"string"==typeof e){if(void 0===i[e])throw new Error('No method named "'+e+'"');i[e]()}})}},{key:"VERSION",get:function(){return i}},{key:"Default",get:function(){return c}}]),a}();return t(window).on(u.LOAD_DATA_API,function(){for(var e=t.makeArray(t(g.DATA_SPY)),i=e.length;i--;){var s=t(e[i]);v._jQueryInterface.call(s,s.data())}}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=f,v._jQueryInterface},v}(jQuery);e.exports=l});