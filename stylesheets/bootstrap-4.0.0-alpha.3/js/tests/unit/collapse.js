$(function(){"use strict";QUnit.module("collapse plugin"),QUnit.test("should be defined on jquery object",function(e){e.expect(1),e.ok($(document.body).collapse,"collapse method is defined")}),QUnit.module("collapse",{beforeEach:function(){$.fn.bootstrapCollapse=$.fn.collapse.noConflict()},afterEach:function(){$.fn.collapse=$.fn.bootstrapCollapse,delete $.fn.bootstrapCollapse}}),QUnit.test("should provide no conflict",function(e){e.expect(1),e.strictEqual($.fn.collapse,void 0,"collapse was set back to undefined (org value)")}),QUnit.test("should throw explicit error on undefined method",function(e){e.expect(1);var a=$("<div/>");a.bootstrapCollapse();try{a.bootstrapCollapse("noMethod")}catch(a){e.strictEqual(a.message,'No method named "noMethod"')}}),QUnit.test("should return jquery collection containing the element",function(e){e.expect(2);var a=$("<div/>"),t=a.bootstrapCollapse();e.ok(t instanceof $,"returns jquery collection"),e.strictEqual(t[0],a[0],"collection contains element")}),QUnit.test("should show a collapsed element",function(e){e.expect(2);var a=$('<div class="collapse"/>').bootstrapCollapse("show");e.ok(a.hasClass("in"),'has class "in"'),e.ok(!/height/i.test(a.attr("style")),"has height reset")}),QUnit.test("should hide a collapsed element",function(e){e.expect(1);var a=$('<div class="collapse"/>').bootstrapCollapse("hide");e.ok(!a.hasClass("in"),'does not have class "in"')}),QUnit.test("should not fire shown when show is prevented",function(e){e.expect(1);var a=e.async();$('<div class="collapse"/>').on("show.bs.collapse",function(t){t.preventDefault(),e.ok(!0,"show event fired"),a()}).on("shown.bs.collapse",function(){e.ok(!1,"shown event fired")}).bootstrapCollapse("show")}),QUnit.test("should reset style to auto after finishing opening collapse",function(e){e.expect(2);var a=e.async();$('<div class="collapse" style="height: 0px"/>').on("show.bs.collapse",function(){e.strictEqual(this.style.height,"0px","height is 0px")}).on("shown.bs.collapse",function(){e.strictEqual(this.style.height,"","height is auto"),a()}).bootstrapCollapse("show")}),QUnit.test('should remove "collapsed" class from target when collapse is shown',function(e){e.expect(1);var a=e.async(),t=$('<a role="button" data-toggle="collapse" class="collapsed" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1"/>').appendTo("#qunit-fixture").on("shown.bs.collapse",function(){e.ok(!t.hasClass("collapsed"),"target does not have collapsed class"),a()}),t.trigger("click")}),QUnit.test('should add "collapsed" class to target when collapse is hidden',function(e){e.expect(1);var a=e.async(),t=$('<a role="button" data-toggle="collapse" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1" class="in"/>').appendTo("#qunit-fixture").on("hidden.bs.collapse",function(){e.ok(t.hasClass("collapsed"),"target has collapsed class"),a()}),t.trigger("click")}),QUnit.test('should remove "collapsed" class from all triggers targeting the collapse when the collapse is shown',function(e){e.expect(2);var a=e.async(),t=$('<a role="button" data-toggle="collapse" class="collapsed" href="#test1"/>').appendTo("#qunit-fixture"),o=$('<a role="button" data-toggle="collapse" class="collapsed" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1"/>').appendTo("#qunit-fixture").on("shown.bs.collapse",function(){e.ok(!t.hasClass("collapsed"),"target trigger does not have collapsed class"),e.ok(!o.hasClass("collapsed"),"alt trigger does not have collapsed class"),a()}),t.trigger("click")}),QUnit.test('should add "collapsed" class to all triggers targeting the collapse when the collapse is hidden',function(e){e.expect(2);var a=e.async(),t=$('<a role="button" data-toggle="collapse" href="#test1"/>').appendTo("#qunit-fixture"),o=$('<a role="button" data-toggle="collapse" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1" class="in"/>').appendTo("#qunit-fixture").on("hidden.bs.collapse",function(){e.ok(t.hasClass("collapsed"),"target has collapsed class"),e.ok(o.hasClass("collapsed"),"alt trigger has collapsed class"),a()}),t.trigger("click")}),QUnit.test('should not close a collapse when initialized with "show" option if already shown',function(e){e.expect(0);var a=e.async(),t=$('<div id="test1" class="in"/>').appendTo("#qunit-fixture").on("hide.bs.collapse",function(){e.ok(!1)});t.bootstrapCollapse("show"),setTimeout(a,0)}),QUnit.test('should open a collapse when initialized with "show" option if not already shown',function(e){e.expect(1);var a=e.async(),t=$('<div id="test1" />').appendTo("#qunit-fixture").on("show.bs.collapse",function(){e.ok(!0)});t.bootstrapCollapse("show"),setTimeout(a,0)}),QUnit.test('should not show a collapse when initialized with "hide" option if already hidden',function(e){e.expect(0);var a=e.async();$('<div class="collapse"></div>').appendTo("#qunit-fixture").on("show.bs.collapse",function(){e.ok(!1,'showing a previously-uninitialized hidden collapse when the "hide" method is called')}).bootstrapCollapse("hide"),setTimeout(a,0)}),QUnit.test('should hide a collapse when initialized with "hide" option if not already hidden',function(e){e.expect(1);var a=e.async();$('<div class="collapse in"></div>').appendTo("#qunit-fixture").on("hide.bs.collapse",function(){e.ok(!0,'hiding a previously-uninitialized shown collapse when the "hide" method is called')}).bootstrapCollapse("hide"),setTimeout(a,0)}),QUnit.test('should remove "collapsed" class from active accordion target',function(e){e.expect(3);var a=e.async(),t='<div class="panel-group" id="accordion"><div class="panel"/><div class="panel"/><div class="panel"/></div>',o=$(t).appendTo("#qunit-fixture").find(".panel"),s=$('<a role="button" data-toggle="collapse" href="#body1" data-parent="#accordion"/>').appendTo(o.eq(0));$('<div id="body1" class="in"/>').appendTo(o.eq(0));var l=$('<a class="collapsed" data-toggle="collapse" role="button" href="#body2" data-parent="#accordion"/>').appendTo(o.eq(1));$('<div id="body2"/>').appendTo(o.eq(1));var n=$('<a class="collapsed" data-toggle="collapse" role="button" href="#body3" data-parent="#accordion"/>').appendTo(o.eq(2));$('<div id="body3"/>').appendTo(o.eq(2)).on("shown.bs.collapse",function(){e.ok(s.hasClass("collapsed"),'inactive target 1 does have class "collapsed"'),e.ok(l.hasClass("collapsed"),'inactive target 2 does have class "collapsed"'),e.ok(!n.hasClass("collapsed"),'active target 3 does not have class "collapsed"'),a()}),n.trigger("click")}),QUnit.test("should allow dots in data-parent",function(e){e.expect(3);var a=e.async(),t='<div class="panel-group accordion"><div class="panel"/><div class="panel"/><div class="panel"/></div>',o=$(t).appendTo("#qunit-fixture").find(".panel"),s=$('<a role="button" data-toggle="collapse" href="#body1" data-parent=".accordion"/>').appendTo(o.eq(0));$('<div id="body1" class="in"/>').appendTo(o.eq(0));var l=$('<a class="collapsed" data-toggle="collapse" role="button" href="#body2" data-parent=".accordion"/>').appendTo(o.eq(1));$('<div id="body2"/>').appendTo(o.eq(1));var n=$('<a class="collapsed" data-toggle="collapse" role="button" href="#body3" data-parent=".accordion"/>').appendTo(o.eq(2));$('<div id="body3"/>').appendTo(o.eq(2)).on("shown.bs.collapse",function(){e.ok(s.hasClass("collapsed"),'inactive target 1 does have class "collapsed"'),e.ok(l.hasClass("collapsed"),'inactive target 2 does have class "collapsed"'),e.ok(!n.hasClass("collapsed"),'active target 3 does not have class "collapsed"'),a()}),n.trigger("click")}),QUnit.test('should set aria-expanded="true" on target when collapse is shown',function(e){e.expect(1);var a=e.async(),t=$('<a role="button" data-toggle="collapse" class="collapsed" href="#test1" aria-expanded="false"/>').appendTo("#qunit-fixture");$('<div id="test1"/>').appendTo("#qunit-fixture").on("shown.bs.collapse",function(){e.strictEqual(t.attr("aria-expanded"),"true",'aria-expanded on target is "true"'),a()}),t.trigger("click")}),QUnit.test('should set aria-expanded="false" on target when collapse is hidden',function(e){e.expect(1);var a=e.async(),t=$('<a role="button" data-toggle="collapse" href="#test1" aria-expanded="true"/>').appendTo("#qunit-fixture");$('<div id="test1" class="in"/>').appendTo("#qunit-fixture").on("hidden.bs.collapse",function(){e.strictEqual(t.attr("aria-expanded"),"false",'aria-expanded on target is "false"'),a()}),t.trigger("click")}),QUnit.test('should set aria-expanded="true" on all triggers targeting the collapse when the collapse is shown',function(e){e.expect(2);var a=e.async(),t=$('<a role="button" data-toggle="collapse" class="collapsed" href="#test1" aria-expanded="false"/>').appendTo("#qunit-fixture"),o=$('<a role="button" data-toggle="collapse" class="collapsed" href="#test1" aria-expanded="false"/>').appendTo("#qunit-fixture");$('<div id="test1"/>').appendTo("#qunit-fixture").on("shown.bs.collapse",function(){e.strictEqual(t.attr("aria-expanded"),"true",'aria-expanded on target is "true"'),e.strictEqual(o.attr("aria-expanded"),"true",'aria-expanded on alt is "true"'),a()}),t.trigger("click")}),QUnit.test('should set aria-expanded="false" on all triggers targeting the collapse when the collapse is hidden',function(e){e.expect(2);var a=e.async(),t=$('<a role="button" data-toggle="collapse" href="#test1" aria-expanded="true"/>').appendTo("#qunit-fixture"),o=$('<a role="button" data-toggle="collapse" href="#test1" aria-expanded="true"/>').appendTo("#qunit-fixture");$('<div id="test1" class="in"/>').appendTo("#qunit-fixture").on("hidden.bs.collapse",function(){e.strictEqual(t.attr("aria-expanded"),"false",'aria-expanded on target is "false"'),e.strictEqual(o.attr("aria-expanded"),"false",'aria-expanded on alt is "false"'),a()}),t.trigger("click")}),QUnit.test('should change aria-expanded from active accordion target to "false" and set the newly active one to "true"',function(e){e.expect(3);var a=e.async(),t='<div class="panel-group" id="accordion"><div class="panel"/><div class="panel"/><div class="panel"/></div>',o=$(t).appendTo("#qunit-fixture").find(".panel"),s=$('<a role="button" data-toggle="collapse" href="#body1" data-parent="#accordion"/>').appendTo(o.eq(0));$('<div id="body1" aria-expanded="true" class="in"/>').appendTo(o.eq(0));var l=$('<a role="button" data-toggle="collapse" href="#body2" data-parent="#accordion" class="collapsed" />').appendTo(o.eq(1));$('<div id="body2" aria-expanded="false"/>').appendTo(o.eq(1));var n=$('<a class="collapsed" data-toggle="collapse" role="button" href="#body3" data-parent="#accordion"/>').appendTo(o.eq(2));$('<div id="body3" aria-expanded="false"/>').appendTo(o.eq(2)).on("shown.bs.collapse",function(){e.strictEqual(s.attr("aria-expanded"),"false",'inactive target 1 has aria-expanded="false"'),e.strictEqual(l.attr("aria-expanded"),"false",'inactive target 2 has aria-expanded="false"'),e.strictEqual(n.attr("aria-expanded"),"true",'active target 3 has aria-expanded="false"'),a()}),n.trigger("click")}),QUnit.test("should not fire show event if show is prevented because other element is still transitioning",function(e){e.expect(1);var a=e.async(),t='<div id="accordion"><div class="panel"/><div class="panel"/></div>',o=!1,s=$(t).appendTo("#qunit-fixture").find(".panel"),l=$('<a role="button" data-toggle="collapse" href="#body1" data-parent="#accordion"/>').appendTo(s.eq(0));$('<div id="body1" class="collapse"/>').appendTo(s.eq(0)).on("show.bs.collapse",function(){o=!0});var n=$('<a role="button" data-toggle="collapse" href="#body2" data-parent="#accordion"/>').appendTo(s.eq(1)),i=$('<div id="body2" class="collapse"/>').appendTo(s.eq(1));n.trigger("click"),i.toggleClass("in collapsing").data("bs.collapse")._isTransitioning=1,l.trigger("click"),setTimeout(function(){e.ok(!o,"show event did not fire"),a()},1)}),QUnit.test('should add "collapsed" class to target when collapse is hidden via manual invocation',function(e){e.expect(1);var a=e.async(),t=$('<a role="button" data-toggle="collapse" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1" class="in"/>').appendTo("#qunit-fixture").on("hidden.bs.collapse",function(){e.ok(t.hasClass("collapsed")),a()}).bootstrapCollapse("hide")}),QUnit.test('should remove "collapsed" class from target when collapse is shown via manual invocation',function(e){e.expect(1);var a=e.async(),t=$('<a role="button" data-toggle="collapse" class="collapsed" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1"/>').appendTo("#qunit-fixture").on("shown.bs.collapse",function(){e.ok(!t.hasClass("collapsed")),a()}).bootstrapCollapse("show")})});