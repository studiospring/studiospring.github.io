/*!
 * Bootstrap's Gruntfile
 * http://getbootstrap.com
 * Copyright 2013-2016 The Bootstrap Authors
 * Copyright 2013-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
module.exports=function(s){"use strict";s.util.linefeed="\n",RegExp.quote=function(s){return s.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};var e=(require("fs"),require("path")),t=require("is-travis"),o=s.file.readJSON("./grunt/configBridge.json",{encoding:"utf8"});Object.keys(o.paths).forEach(function(s){o.paths[s].forEach(function(s,t,o){o[t]=e.join("./docs",s)})}),s.initConfig({pkg:s.file.readJSON("package.json"),banner:'/*!\n * Bootstrap v<%= pkg.version %> (<%= pkg.homepage %>)\n * Copyright 2011-<%= grunt.template.today("yyyy") %> <%= pkg.author %>\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n',jqueryCheck:"if (typeof jQuery === 'undefined') {\n  throw new Error('Bootstrap\\'s JavaScript requires jQuery')\n}\n",jqueryVersionCheck:"+function ($) {\n  var version = $.fn.jquery.split(' ')[0].split('.')\n  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1) || (version[0] >= 4)) {\n    throw new Error('Bootstrap\\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0')\n  }\n}(jQuery);\n\n",clean:{dist:"dist",docs:"docs/dist"},babel:{dev:{options:{sourceMap:!0,modules:"ignore"},files:{"js/dist/util.js":"js/src/util.js","js/dist/alert.js":"js/src/alert.js","js/dist/button.js":"js/src/button.js","js/dist/carousel.js":"js/src/carousel.js","js/dist/collapse.js":"js/src/collapse.js","js/dist/dropdown.js":"js/src/dropdown.js","js/dist/modal.js":"js/src/modal.js","js/dist/scrollspy.js":"js/src/scrollspy.js","js/dist/tab.js":"js/src/tab.js","js/dist/tooltip.js":"js/src/tooltip.js","js/dist/popover.js":"js/src/popover.js"}},dist:{options:{modules:"ignore"},files:{"<%= concat.bootstrap.dest %>":"<%= concat.bootstrap.dest %>"}}},stamp:{options:{banner:"<%= banner %>\n<%= jqueryCheck %>\n<%= jqueryVersionCheck %>\n+function ($) {\n",footer:"\n}(jQuery);"},bootstrap:{files:{src:"<%= concat.bootstrap.dest %>"}}},concat:{options:{process:function(s){return s.replace(/^(export|import).*/gm,"")},stripBanners:!1},bootstrap:{src:["js/src/util.js","js/src/alert.js","js/src/button.js","js/src/carousel.js","js/src/collapse.js","js/src/dropdown.js","js/src/modal.js","js/src/scrollspy.js","js/src/tab.js","js/src/tooltip.js","js/src/popover.js"],dest:"dist/js/<%= pkg.name %>.js"}},uglify:{options:{compress:{warnings:!1},mangle:!0,preserveComments:/^!|@preserve|@license|@cc_on/i},core:{src:"<%= concat.bootstrap.dest %>",dest:"dist/js/<%= pkg.name %>.min.js"},docsJs:{src:o.paths.docsJs,dest:"docs/assets/js/docs.min.js"}},qunit:{options:{inject:"js/tests/unit/phantom.js"},files:"js/tests/index.html"},scsslint:{options:{bundleExec:!0,config:"scss/.scss-lint.yml",reporterOutput:null},core:{src:["scss/*.scss","!scss/_normalize.scss"]},docs:{src:["docs/assets/scss/*.scss","!docs/assets/scss/docs.scss"]}},cssmin:{options:{compatibility:"ie9",keepSpecialComments:"*",sourceMap:!0,advanced:!1},core:{files:[{expand:!0,cwd:"dist/css",src:["*.css","!*.min.css"],dest:"dist/css",ext:".min.css"}]},docs:{files:[{expand:!0,cwd:"docs/assets/css",src:["*.css","!*.min.css"],dest:"docs/assets/css",ext:".min.css"}]}},copy:{docs:{expand:!0,cwd:"dist/",src:["**/*"],dest:"docs/dist/"}},connect:{server:{options:{port:3e3,base:"."}}},jekyll:{options:{bundleExec:!0,config:"_config.yml",incremental:!1},docs:{},github:{options:{raw:"github: true"}}},htmllint:{options:{ignore:["Attribute \u201cautocomplete\u201d is only allowed when the input type is \u201ccolor\u201d, \u201cdate\u201d, \u201cdatetime\u201d, \u201cdatetime-local\u201d, \u201cemail\u201d, \u201chidden\u201d, \u201cmonth\u201d, \u201cnumber\u201d, \u201cpassword\u201d, \u201crange\u201d, \u201csearch\u201d, \u201ctel\u201d, \u201ctext\u201d, \u201ctime\u201d, \u201curl\u201d, or \u201cweek\u201d.","Attribute \u201cautocomplete\u201d not allowed on element \u201cbutton\u201d at this point.","Consider using the \u201ch1\u201d element as a top-level heading only (all \u201ch1\u201d elements are treated as top-level headings by many screen readers and other tools).","Element \u201cdiv\u201d not allowed as child of element \u201cprogress\u201d in this context. (Suppressing further errors from this subtree.)","Element \u201cimg\u201d is missing required attribute \u201csrc\u201d.","The \u201ccolor\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill.","The \u201cdate\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill.","The \u201cdatetime\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill.","The \u201cdatetime-local\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill.","The \u201cmonth\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill.","The \u201ctime\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill.","The \u201cweek\u201d input type is not supported in all browsers. Please be sure to test, and consider using a polyfill."]},src:["_gh_pages/**/*.html","js/tests/visual/*.html"]},watch:{src:{files:"<%= concat.bootstrap.src %>",tasks:["babel:dev"]},sass:{files:"scss/**/*.scss",tasks:["dist-css","docs"]},docs:{files:"docs/assets/scss/**/*.scss",tasks:["dist-css","docs"]}},"saucelabs-qunit":{all:{options:{build:process.env.TRAVIS_JOB_ID,concurrency:10,maxRetries:3,maxPollRetries:4,urls:["http://127.0.0.1:3000/js/tests/index.html?hidepassed"],browsers:s.file.readYAML("grunt/sauce_browsers.yml")}}},exec:{postcss:{command:"npm run postcss"},"postcss-docs":{command:"npm run postcss-docs"},htmlhint:{command:"npm run htmlhint"},"upload-preview":{command:"./grunt/upload-preview.sh"}},buildcontrol:{options:{dir:"_gh_pages",commit:!0,push:!0,message:"Built %sourceName% from commit %sourceCommit% on branch %sourceBranch%"},pages:{options:{remote:"git@github.com:twbs/derpstrap.git",branch:"gh-pages"}}},compress:{main:{options:{archive:"bootstrap-<%= pkg.version %>-dist.zip",mode:"zip",level:9,pretty:!0},files:[{expand:!0,cwd:"dist/",src:["**"],dest:"bootstrap-<%= pkg.version %>-dist"}]}}}),require("load-grunt-tasks")(s,{scope:"devDependencies",pattern:["grunt-*","!grunt-sass","!grunt-contrib-sass"]}),require("time-grunt")(s),s.registerTask("validate-html",["jekyll:docs","htmllint","exec:htmlhint"]);var r=function(s){return!process.env.TWBS_TEST||process.env.TWBS_TEST===s},i=function(s){return void 0===s||"0"!==s},n=[];r("core")&&"twbs-savage/bootstrap"!==process.env.TRAVIS_REPO_SLUG&&(n=n.concat(["dist-css","dist-js","test-scss","qunit","docs"])),r("validate-html")&&t&&i(process.env.TWBS_DO_VALIDATOR)&&n.push("validate-html"),"undefined"!=typeof process.env.SAUCE_ACCESS_KEY&&r("sauce-js-unit")&&(n=n.concat(["dist","docs-css","docs-js","clean:docs","copy:docs","exec:upload-preview"]),i(process.env.TWBS_DO_SAUCE)&&(n.push("connect"),n.push("saucelabs-qunit"))),s.registerTask("test",n),s.registerTask("dist-js",["babel:dev","concat","babel:dist","stamp","uglify:core"]),s.registerTask("test-scss",["scsslint:core"]),function(e){require("./grunt/bs-sass-compile/"+e+".js")(s)}(process.env.TWBS_SASS||"libsass"),s.registerTask("sass-compile",["sass:core","sass:docs"]),s.registerTask("dist-css",["sass-compile","exec:postcss","cssmin:core","cssmin:docs"]),s.registerTask("dist",["clean:dist","dist-css","dist-js"]),s.registerTask("default",["clean:dist","test"]),s.registerTask("docs-css",["cssmin:docs","exec:postcss-docs"]),s.registerTask("lint-docs-css",["scsslint:docs"]),s.registerTask("docs-js",["uglify:docsJs"]),s.registerTask("docs",["lint-docs-css","docs-css","docs-js","clean:docs","copy:docs"]),s.registerTask("docs-github",["jekyll:github"]),s.registerTask("prep-release",["dist","docs","docs-github","compress"]),s.registerTask("publish",["buildcontrol:pages"])};