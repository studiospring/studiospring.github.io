"use strict";window.jQuery.each(Waypoint.adapters,function(e,t){describe(t.name+" adapter: ",function(){describe("Waypoint",function(){function e(){o=!0}function n(){return o}var o,i,r,a,l,c=window.jQuery,s=50;beforeEach(function(){Waypoint.Adapter=t.Adapter,loadFixtures("standard.html"),i=c(window),o=!1,r=null}),afterEach(function(){Waypoint.destroyAll(),i.scrollTop(0).scrollLeft(0)}),describe("new Waypoint()",function(){it("errors out",function(){expect(function(){r=new Waypoint}).toThrow()})}),describe("new Waypoint(options)",function(){it("returns an instance of the Waypoint class",function(){r=new Waypoint({element:document.getElementById("same1"),handler:function(){}}),expect(r instanceof Waypoint).toBeTruthy()}),it("requires the element option",function(){expect(function(){r=new Waypoint({handler:function(){}})}).toThrow()}),it("requires the handler option",function(){expect(function(){r=new Waypoint({element:document.getElementById("same1")})}).toThrow()}),it("triggers down on new already-reached waypoints",function(){runs(function(){a=c("#same2"),i.scrollTop(a.offset().top+1),r=new Waypoint({element:a[0],handler:function(e){o="down"===e}})}),waitsFor(n,"callback to trigger")})}),describe("handler option",function(){var e;beforeEach(function(){a=c("#same1"),e=null,r=new Waypoint({element:a[0],handler:function(t){e=t}})}),it("triggers with direction parameter",function(){runs(function(){i.scrollTop(a.offset().top)}),waitsFor(function(){return"down"===e},"down to trigger"),runs(function(){i.scrollTop(a.offset().top-1)}),waitsFor(function(){return"up"===e},"up to trigger")})}),describe("offset option",function(){beforeEach(function(){a=c("#same1")}),it("takes a px offset",function(){runs(function(){r=new Waypoint({element:a[0],handler:e,offset:50}),i.scrollTop(a.offset().top-51),expect(o).toBeFalsy(),i.scrollTop(a.offset().top-50)}),waitsFor(n,"callback to trigger")}),it("takes a % offset",function(){var t=a.offset().top-.37*Waypoint.viewportHeight();runs(function(){r=new Waypoint({element:a[0],handler:e,offset:"37%"}),i.scrollTop(t-1),expect(o).toBeFalsy(),i.scrollTop(t)}),waitsFor(n,"callback to trigger")}),it("takes a function offset",function(){runs(function(){r=new Waypoint({element:a[0],handler:e,offset:function(){return-c(this.element).height()}}),i.scrollTop(a.offset().top+a.height()-1),expect(o).toBeFalsy(),i.scrollTop(a.offset().top+a.height())}),waitsFor(n,"callback to trigger")}),it("takes a bottom-in-view function alias",function(){var t=a.offset().top,l=a.outerHeight(),c=Waypoint.viewportHeight(),s=t+l-c;runs(function(){r=new Waypoint({element:a[0],handler:e,offset:"bottom-in-view"}),i.scrollTop(s-1),expect(o).toBeFalsy(),i.scrollTop(s)}),waitsFor(n,"callback to trigger")})}),describe("context option",function(){beforeEach(function(){i=c("#bottom"),a=c("#inner3")}),it("works with px offset",function(){r=new Waypoint({element:a[0],handler:e,context:i[0],offset:10}),runs(function(){i.scrollTop(189),expect(o).toBeFalsy(),i.scrollTop(190)}),waitsFor(n,"callback to trigger")}),it("works with % offset",function(){r=new Waypoint({element:a[0],handler:e,context:i[0],offset:"100%"}),runs(function(){i.scrollTop(149),expect(o).toBeFalsy(),i.scrollTop(150)}),waitsFor(n,"callback to trigger")}),it("works with function offset",function(){r=new Waypoint({element:a[0],handler:e,context:i[0],offset:function(){return c(this.element).height()/2}}),runs(function(){i.scrollTop(149),expect(o).toBeFalsy(),i.scrollTop(150)}),waitsFor(n,"callback to trigger")}),it("works with bottom-in-view offset alias",function(){r=new Waypoint({element:a[0],handler:e,context:i[0],offset:"bottom-in-view"}),runs(function(){i.scrollTop(249),expect(o).toBeFalsy(),i.scrollTop(250)}),waitsFor(n,"callback to trigger")})}),describe("horizontal option",function(){var e;beforeEach(function(){e=null,a=c("#same1"),r=new Waypoint({element:a[0],horizontal:!0,handler:function(t){e=t}})}),it("triggers right/left directions",function(){runs(function(){i.scrollLeft(a.offset().left)}),waitsFor(function(){return"right"===e},"right direction to trigger"),runs(function(){i.scrollLeft(a.offset().left-1)}),waitsFor(function(){return"left"===e})})}),describe("continuous option",function(){function e(){o+=1,l=this}var t,n,o,l;beforeEach(function(){a=c("#same1"),t=c("#near1"),o=0,r=new Waypoint({element:a[0],continuous:!1,handler:e}),n=new Waypoint({element:t[0],continuous:!1,handler:e})}),it("does not trigger the earlier waypoint",function(){runs(function(){i.scrollTop(t.offset().top)}),waitsFor(function(){return o},"later callback to trigger"),runs(function(){expect(o).toEqual(1),expect(l).toEqual(n)})}),it("prevents earlier trigger on refresh",function(){runs(function(){a.css("top","-1px"),t.css("top","-2px"),Waypoint.refreshAll()}),waitsFor(function(){return o},"later callback to trigger"),runs(function(){expect(o).toEqual(1),expect(l).toEqual(r)})})}),describe("with window as the waypoint element",function(){beforeEach(function(){a=c(window),r=new Waypoint({element:a[0],offset:-a.height(),handler:e})}),it("triggers waypoint",function(){runs(function(){a.scrollTop(a.height()+1)}),waitsFor(n,"callback to trigger")})}),describe("#disable()",function(){beforeEach(function(){a=c("#same1"),r=new Waypoint({element:a[0],handler:e}),l=r.disable()}),it("returns the same waypoint object for chaining",function(){expect(l).toEqual(r)}),it("disables callback triggers",function(){runs(function(){i.scrollTop(a.offset().top)}),waits(s),runs(function(){expect(o).toBeFalsy()})})}),describe("#enable()",function(){beforeEach(function(){a=c("#same1"),r=new Waypoint({element:a[0],handler:e}),r.disable(),l=r.enable()}),it("returns the same waypoint instance for chaining",function(){expect(l).toEqual(r)}),it("enables callback triggers",function(){runs(function(){i.scrollTop(a.offset().top)}),waitsFor(n,"callback to trigger")})}),describe("#destroy()",function(){beforeEach(function(){a=c("#same1"),r=new Waypoint({element:a[0],handler:e}),l=r.destroy()}),it("returns undefined",function(){expect(l).toBeUndefined()}),it("no longer triggers callbacks",function(){runs(function(){i.scrollTop(a.offset().top)}),waits(s),runs(function(){expect(o).toBeFalsy()})})}),describe("#previous",function(){beforeEach(function(){a=c("#same1"),r=new Waypoint({element:a[0],handler:e})}),it("calls previous on the waypoint group",function(){spyOn(r.group,"previous"),r.previous(),expect(r.group.previous).toHaveBeenCalledWith(r)}),it("returns the group call results",function(){expect(r.previous()).toBeNull()})}),describe("#next",function(){beforeEach(function(){a=c("#same1"),r=new Waypoint({element:a[0],handler:e})}),it("calls next on the waypoint group",function(){spyOn(r.group,"next"),r.next(),expect(r.group.next).toHaveBeenCalledWith(r)}),it("returns the group call results",function(){expect(r.next()).toBeNull()})}),describe("Waypoint.viewportHeight()",function(){it("returns window innerHeight if it exists",function(){var e=Waypoint.viewportHeight();window.innerHeight?expect(e).toEqual(window.innerHeight):expect(e).toEqual(document.documentElement.clientHeight)})}),describe("Waypoint.viewportWidth()",function(){it("returns client width",function(){var e=document.documentElement.clientWidth;expect(Waypoint.viewportWidth()).toEqual(e)})}),describe("Waypoint.refreshAll()",function(){it("is an alias for Waypoint.Context.refreshAll",function(){spyOn(Waypoint.Context,"refreshAll"),Waypoint.refreshAll(),expect(Waypoint.Context.refreshAll).toHaveBeenCalled()})}),describe("Waypoint.destroyAll()",function(){it("calls destroy on all waypoints",function(){var e=new Waypoint({element:c("#same1")[0],handler:function(){}});r=new Waypoint({element:c("#same1")[0],handler:function(){}}),spyOn(e,"destroy").andCallThrough(),spyOn(r,"destroy").andCallThrough(),Waypoint.destroyAll(),expect(e.destroy).toHaveBeenCalled(),expect(r.destroy).toHaveBeenCalled()})}),describe("Waypoint.disableAll()",function(){it("calls disable on all waypoints",function(){var e=new Waypoint({element:c("#same1")[0],handler:function(){}});r=new Waypoint({element:c("#same1")[0],handler:function(){}}),spyOn(e,"disable").andCallThrough(),spyOn(r,"disable").andCallThrough(),Waypoint.disableAll(),expect(e.disable).toHaveBeenCalled(),expect(r.disable).toHaveBeenCalled()})}),describe("Waypoint.enableAll()",function(){it("calls enable on all waypoints",function(){var e=new Waypoint({element:c("#same1")[0],handler:function(){}});r=new Waypoint({element:c("#same1")[0],handler:function(){}}),spyOn(e,"enable").andCallThrough(),spyOn(r,"enable").andCallThrough(),Waypoint.enableAll(),expect(e.enable).toHaveBeenCalled(),expect(r.enable).toHaveBeenCalled()})})})})});